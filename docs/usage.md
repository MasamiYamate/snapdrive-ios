# 使い方ガイド

## ワークフロー概要

SnapDriveでのテストは以下の流れで行います:

1. **テストシナリオを作成** - Claudeに自然言語で指示、Baselineも同時に取得
2. **リポジトリにコミット** - シナリオとBaselineをチームで共有
3. **差分検証** - 以後の実行でBaselineとの差分を検出

## Step 1: テストシナリオの作成

Claudeに自然言語でテストしたい内容を伝えるだけで、シナリオ作成からBaseline取得まで自動で行います。

> **注意**: テストケース作成時、Claudeは**アプリの実装コードを変更しません**。テストは既存の動作を検証するためのものです。

### 遷移テストの例

```
起動画面からログイン画面への遷移をテストしたい。
「navigate-to-login」という名前でテストケースを作成して。
```

```
タブバーの「設定」をタップしてProfileViewControllerが表示されることを確認したい。
「open-profile」というテストケースを作成して。
```

Claudeが自動で:
1. アプリを起動して現在の画面を確認
2. 指定された操作を実行しながらシナリオを構築
3. 遷移先の画面で`smart_checkpoint`を設定
   - スクロールViewがあれば全体をキャプチャ
   - なければ通常のスクリーンショット
4. Baselineを取得して`.snapdrive/test-cases/`に保存

### フロー全体のテスト

```
ログインフローをテストしたい。
1. 起動画面で「ログイン」ボタンをタップ
2. メールアドレスとパスワードを入力して送信
3. ホーム画面が表示されることを確認
「login-flow」という名前で作成して。
```

```
商品をカートに追加して購入完了までの流れをテストしたい。
「purchase-flow」として作成して。
```

## Step 2: リポジトリにコミット

作成されたテストケースとBaselineをGitにコミットします:

```bash
git add .snapdrive/
git commit -m "Add login-flow test case with baselines"
```

Baselineをリポジトリに含めることで、チーム全体で同じ基準でUIを検証できます。

## Step 3: 差分検証

コード変更後、テストを実行してUIの差分を検出します:

```
login-flowテストケースを実行して
```

Baselineと現在の画面を比較し、差分があればHTMLレポートで確認できます。

### Baselineの更新

意図的なUI変更の場合は、Baselineを更新します:

```
login-flowテストケースを実行してbaselineを更新して
```

## 次のステップ

- [テストケースの詳細](test-cases.md) - シナリオファイルの書式とアクション一覧
- [CLIでの自動実行](cli.md) - CI/CDでの利用方法
